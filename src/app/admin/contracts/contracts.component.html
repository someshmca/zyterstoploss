
 <div class="page-content">
  
   <div class="card custom-card">
      <div class="card-header">
      Contracts
      <alert></alert>
      </div>
      <div class="card-body">
          <div class="select-grid-wrap">
            <div class="select-grid-header">
              <div>
                  <label class="form-field-label">
                      Search a Contract
                  </label>
                  <!-- <div class="form-field-input">
                      <select class="form-control cselect-dropdown" name="contractId" (change)="onChangeContract($event.target.value)">
                          <option selected="selected" value="Select All">Select All</option>
                          <option *ngFor="let contract of contractIDs" [value]="contract.contractsId">
                              {{contract.contractsId}}
                          </option>
                      </select>
                  </div> -->
                  <div fxLayout fxLayoutAlign="center center">
                    <mat-form-field fxFlex="40%">
                      <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Search a Contract">
                    </mat-form-field>
                  </div>  
              </div>  
                  <!-- <div *ngIf="isNewContractAdded" class="success-dialog-msg">
                       <h2>New Contract added successfully</h2>
                  </div>
              <div *ngIf="isContractUpdated" class="success-dialog-msg">
                <h2>Contract updated successfully</h2>
              </div>  -->
            </div>
  
              <div class="card-table-area contracts-table-area">
          <div class="table-responsive">
              <div class="cust-add-area">
                  <span class="fa fa-plus-circle" (click)="openCustomModal(true, null)"></span>
              </div>  
              <div class="mat-elevation-z8">
                <table mat-table matSort [dataSource]="dataSource" class="table table-bordered table-striped card-table">
              
                  <!-- Contract ID Column -->
                  <ng-container matColumnDef="contractsId">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Contract ID </th>
                    <td mat-cell *matCellDef="let element"> {{element.contractsId}} </td>
                  </ng-container>
                  <ng-container matColumnDef="contractEffectiveDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Effective Date </th>
                    <td mat-cell *matCellDef="let element"> {{element.contractEffectiveDate | date:'MM-dd-yyyy'}} </td>
                  </ng-container>
                  <ng-container matColumnDef="contractEndDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> End Date </th>
                    <td mat-cell *matCellDef="let element"> 
                      {{element.contractEndDate | date:'MM-dd-yyyy'}} </td>
                  </ng-container>
                  <ng-container matColumnDef="contractStatus">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                    <td mat-cell *matCellDef="let element"> 
                      {{element.contractStatus}} </td>
                  </ng-container>
                  <ng-container matColumnDef="contractType">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Contract Type </th>
                    <td mat-cell *matCellDef="let element"> {{element.contractType}} </td>
                  </ng-container>
                  <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                    <td mat-cell *matCellDef="let element"> {{element.description}} </td>
                  </ng-container>
  
                  <!-- Action Column -->
                  <ng-container matColumnDef="updateid">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element" class="action-link"> 
                      <span class="fa fa-edit" (click)="openCustomModal(true, element.contractsId)"></span>
                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
              </div>
  
          </div>
              </div>
              </div>
      </div>
  </div>
</div>


<div class="modal fade" role="dialog" [ngStyle]="{'display': isCustomModalOpen ? 'block' : 'none', 'opacity': 1}">
   <div class="modal-dialog modal-dialog-centered">
     <div class="modal-content">  
       <!-- Modal Header -->
       <div class="modal-header">
           <h4 class="modal-title">
               <span *ngIf="isAddMode">Add Contract</span>
           <span *ngIf="!isAddMode">Update Contract</span>
           </h4>
           <a class="fa fa-2x fa-times-circle" (click)="openCustomModal(false, null)">
           </a>
       </div>
       <!-- Modal body -->
       <div class="modal-body">
         <form [formGroup]="contractForm" (ngSubmit)="onSubmit()">
            <div class="row"> 
               <div class="col-md-6">     
                <div class="form-group">
                        
                        <label>Effective Date<small class="starmark">*</small></label>
                        
                        <input type="date" value="MM/DD/YYYY" formControlName="contractEffectiveDate" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.contractEffectiveDate.errors }" />
                        <div class="invalid-feedback">
                            <div *ngIf="submitted && f.contractEffectiveDate.errors" >
                                <div *ngIf="f.contractEffectiveDate.errors.required">Effective Date is required</div>
                                <div *ngIf="f.contractEffectiveDate.errors.pattern">Effective Date must be Valid</div>
                            </div>
                        </div>
                </div>   
                <div class="form-group">
                        <label>End Date<small class="starmark">*</small></label>
                        <input type="date" formControlName="contractEndDate" class="form-control form-control-date" [ngClass]="{ 'is-invalid': submitted && f.contractEndDate.errors }" />
                        <div class="invalid-feedback">
                            <div *ngIf="submitted && f.contractEndDate.errors">
                                <div *ngIf="f.contractEndDate.errors.required">End Date is required</div>
                                <div *ngIf="f.contractEndDate.errors.pattern">End Date must be Valid</div>
                            </div>
                        </div>
                </div>
                <div class="form-group">
                        <label>Status</label>
                        <input type="text" formControlName="contractStatus" class="form-control" value="Active" disabled />
                        <!-- <div *ngIf="submitted && f.status.errors" class="invalid-feedback">
                            <div *ngIf="f.status.errors.required">Status is required</div>
                        </div> -->
                        <div class="invalid-feedback">&nbsp;</div>
               </div>
               </div>
               <div class="col-md-6">
                <div class="form-group">
                        <label>Contract Type<small class="starmark">*</small></label>
                        <select formControlName="contractType" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.contractType.errors }">
                            <option value=""></option>
                            <option value="12/12">12/12</option>
                            <option value="12/18">12/18</option>
                        </select>
                        <div class="invalid-feedback">
                            <div *ngIf="submitted && f.contractType.errors">
                                <div *ngIf="f.contractType.errors.required">Contract Type is required</div>
                            </div>
                        </div>
                </div>
                <div class="form-group">
                        <label>Description<small class="starmark">*</small></label>
                   
                        <input type="text" formControlName="description" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.description.errors }" />
                        <div class="invalid-feedback">
                            <div *ngIf="submitted && f.description.errors">
                                <div *ngIf="f.description.errors.required">Description is required</div>
                            </div>
                        </div>
                </div>
                <div class="form-group">
                        <label>Max Allowed Period</label>
                        <input type="number" formControlName="maxAllowedPeriod" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.maxAllowedPeriod.errors }" />
                        <div class="invalid-feedback">
                            <div *ngIf="submitted && f.maxAllowedPeriod.errors">
                                <div *ngIf="f.maxAllowedPeriod.errors.required">
                                    Max Allowed Period is required</div>
                            </div>
                        </div>
                </div>
               </div>
            </div>
            <div class="row form-btns-area">
                <button [disabled]="loading" class="btn btn-primary">
                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                    Save
                </button>
                <a class="btn btn-link" (click)="openCustomModal(false, null)">Cancel</a>
            </div>
        </form>  
       </div>          
       </div>
     </div>
   </div>
